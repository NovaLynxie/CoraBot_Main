extends ../blocks/layout
block content
  - let {autoMod, chatBot, notifier, botlogger, modlogger} = guildSettings;
  - let guildPrefix = guildSettings.guildPrefix;
  .container
    include ../blocks/guild-nav
    block navtab
      - var activeTab = 'manage'  
    .jumbotron.text-center
      h3.display-4 Guild Settings
      p.lead
      | This part of the dashboard is not yet completed and may not be functional. 
      br
      | You&apos;ll have to use the commands in the meantime to change Cora's settings.
      br
      | Sorry about that. - Nova Lynxie
      .settings-card-base
        h3 Bot Control Panel
        .settings-card-modules.settings-card-wrapper
          h4 Guild Details
          .guild-details-card
            h5 Basic Information
            - iconUrl = (guild.icon) ? `https://cdn.discordapp.com/icons/${guild.id}/${guild.icon}.png?size=128` : 'https://via.placeholder.com/128.png?text=No Guild Icon'
            - bannerUrl = (guild.banner) ? `https://cdn.discordapp.com/banners/${guild.id}/${guild.banner}.png` : 'https://via.placeholder.com/288x162.png?text=No Guild Banner'
            img.d-flex.mr-3.rounded-circle.guild-icon(src=iconUrl alt='Guild Icon')
            img.guild-banner(src=bannerUrl)
            .guild-details-wrapper
              p
              | Name: #{guild.name}
              br
              | (ID: #{guild.id})
              br
              | Verified: #{(guild.verified)?'Yes':'No'}
              br
              | Guild Prefix: '#{(guildPrefix) ? guildPrefix : bot.options.globalPrefix}'
              br
              | Owner: #{guild.members.cache.get(guild.ownerId).user.tag} 
              br
              | Members: #{guild.memberCount} (#{guild.members.cache.filter(member => !member.user.bot).size} users #{guild.members.cache.filter(member => member.user.bot).size} bots)
              br
              | Region: #{guild.region}
              br
              | Locale: #{guild.preferredLocale}
              
          .guild-details-card
            h5 Server Details
            .guild-details-wrapper
              h6 Description
              p
              | #{(guild.description)?guild.description:'None Set'}
            .guild-details-wrapper
              h6 Subscriptions
              p
              | Boost Tier: #{guild.premiumTier}
              | (Total Subs: #{guild.premiumSubscriptionCount})
              br
              | Vanity URL
              br 
              | Code: #{(guild.vanityURLCode)?guild.vanityURLCode:'N/A'} (Used #{(guild.vanityURLUses)?guild.vanityURLUses:'NaN'} times)
        
        .settings-card-modules.settings-card-wrapper
          h4 Module Settings (Broken)
          p.lead Change settings for each module from here. 
          .settings-card-modules.settings-card-block
            h5 Auto Moderation
            .settings-text-wrapper
              | Enabled? NULL
              br
              | Channel List Mode: NULL
              br
              | Media Removal
              br
              | Animated Gifs: 
              br
              | Static Images: 
              br
              | Links/URLs: 
            table.settings-table-main(border="1")
              tr
                th Setting
                th Value
              tr
                td Channels List
                td NULL
              tr
                td URL Blacklist
                td NULL
            br
            button.btn.btn-light.edit-settings(data-bs-toggle='modal' data-bs-target='#settingAutoModBotModal') Edit 
              i.fas.fa-edit
          .settings-card-modules.settings-card-block
            h5 Bot Notifications
            .settings-text-wrapper
              | Enabled? NULL
              br
              | Event Trackers
              br
              | Join: NULL
              br
              | Leave: NULL
              br
              | Kick: NULL
              br
              | Ban: NULL
              br
              | Notifs Channel: NULL
            table.settings-table-main(border="1")
              tr
                th Event
                th Message
              tr
                td Join
                td NULL
              tr
                td Leave
                td NULL
              tr
                td Kick
                td NULL
              tr
                td Ban
                td NULL
            br
            button.btn.btn-light.edit-settings(data-bs-toggle='modal' data-bs-target='#settingBotNotifsModal') Edit 
              i.fas.fa-edit
          .settings-card-modules.settings-card-block
            h5 Smart Chat Bot
            .settings-text-wrapper
              | Enabled? NULL
              br
              | ChatBot Settings
              br
              | Name: NULL
              br
              | Gender: NULL
            table.settings-table-main(border="1")
              tr
                th Chat Channels
              tr
                td NULL
            br
            button.btn.btn-light.edit-settings(data-bs-toggle='modal' data-bs-target='#settingSmartChatBotModal') Edit 
              i.fas.fa-edit

        .settings-card-modules.danger-block
          h4 Danger Zone
          - disableAction
          p.lead Beware, these are destructive actions!
            .settings-card-wrapper(style="width: auto; margin-left: 2px;margin-right: 2px;")
              h5 Reset Settings
              a.btn.btn-outline-danger(data-bs-toggle='modal' data-bs-target='#settingsResetModal' role='button') RESET
            .settings-card-wrapper(style="width: auto; margin-left: 2px;margin-right: 2px;")
              h5 Leave Guild
              a.btn.btn-outline-danger(data-bs-toggle='modal' data-bs-target='#serverLeaveModal' role='button') LEAVE
        include ../blocks/guild-manage-modals